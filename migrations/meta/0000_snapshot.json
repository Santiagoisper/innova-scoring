{
  "id": "6f72fdcb-32cf-4d47-b01d-82e3e4f04b83",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.activity_log": {
      "name": "activity_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user": {
          "name": "user",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target": {
          "name": "target",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'info'"
        },
        "sector": {
          "name": "sector",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.admin_rules": {
      "name": "admin_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "domain_key": {
          "name": "domain_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trigger_key": {
          "name": "trigger_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rule_priority": {
          "name": "rule_priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "forces_minimum_status": {
          "name": "forces_minimum_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "blocks_approval": {
          "name": "blocks_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "requires_capa": {
          "name": "requires_capa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "required_action_text": {
          "name": "required_action_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "evidence_required_text": {
          "name": "evidence_required_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recommended_timeline_days": {
          "name": "recommended_timeline_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "applies_to_phase": {
          "name": "applies_to_phase",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "applies_to_sponsor": {
          "name": "applies_to_sponsor",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at_utc": {
          "name": "created_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at_utc": {
          "name": "updated_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by_user_id": {
          "name": "updated_by_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.admin_users": {
      "name": "admin_users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "permission": {
          "name": "permission",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'readonly'"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'admin'"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "admin_users_username_unique": {
          "name": "admin_users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chat_logs": {
      "name": "chat_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_type": {
          "name": "user_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_name": {
          "name": "user_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.domains": {
      "name": "domains",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "domain_key": {
          "name": "domain_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_visible_in_report": {
          "name": "is_visible_in_report",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_at_utc": {
          "name": "updated_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by_user_id": {
          "name": "updated_by_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "domains_domain_key_unique": {
          "name": "domains_domain_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "domain_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.questions": {
      "name": "questions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'YesNo'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "is_knock_out": {
          "name": "is_knock_out",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "keywords": {
          "name": "keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.report_audit_log": {
      "name": "report_audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action_type": {
          "name": "action_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "actor_user_id": {
          "name": "actor_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "actor_name": {
          "name": "actor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at_utc": {
          "name": "created_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "before_state_json": {
          "name": "before_state_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "after_state_json": {
          "name": "after_state_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "details_json": {
          "name": "details_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_critical_change": {
          "name": "is_critical_change",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "change_reason": {
          "name": "change_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.report_signatures": {
      "name": "report_signatures",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "report_id": {
          "name": "report_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "signed_by_name": {
          "name": "signed_by_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "signed_by_role": {
          "name": "signed_by_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "signed_at_utc": {
          "name": "signed_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hash_at_signature": {
          "name": "hash_at_signature",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "signature_method": {
          "name": "signature_method",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'acknowledgment'"
        },
        "signature_payload": {
          "name": "signature_payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.report_templates": {
      "name": "report_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "status_type": {
          "name": "status_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "executive_summary_text": {
          "name": "executive_summary_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reevaluation_clause_text": {
          "name": "reevaluation_clause_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "domain_paragraph_templates_json": {
          "name": "domain_paragraph_templates_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_by_user_id": {
          "name": "updated_by_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at_utc": {
          "name": "updated_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.reports": {
      "name": "reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "site_id": {
          "name": "site_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "report_version": {
          "name": "report_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "generated_by_user_id": {
          "name": "generated_by_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "generated_at_utc": {
          "name": "generated_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "status_at_generation": {
          "name": "status_at_generation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "final_status": {
          "name": "final_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "score_snapshot_json": {
          "name": "score_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "rules_snapshot_json": {
          "name": "rules_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "templates_snapshot_json": {
          "name": "templates_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "mappings_snapshot_json": {
          "name": "mappings_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_snapshot_json": {
          "name": "narrative_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "capa_items_json": {
          "name": "capa_items_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_storage_path": {
          "name": "pdf_storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hash_sha256": {
          "name": "hash_sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_locked": {
          "name": "is_locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "previous_report_id": {
          "name": "previous_report_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.score_status_mapping": {
      "name": "score_status_mapping",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "min_score": {
          "name": "min_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_score": {
          "name": "max_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status_label": {
          "name": "status_label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_by_user_id": {
          "name": "updated_by_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at_utc": {
          "name": "updated_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sites": {
      "name": "sites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "contact_name": {
          "name": "contact_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Pending'"
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "score": {
          "name": "score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "answers": {
          "name": "answers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "registered_at": {
          "name": "registered_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "evaluated_at": {
          "name": "evaluated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "evaluated_by": {
          "name": "evaluated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "token_sent_at": {
          "name": "token_sent_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.terms_acceptance": {
      "name": "terms_acceptance",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "registrant_name": {
          "name": "registrant_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "registrant_email": {
          "name": "registrant_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "site_name": {
          "name": "site_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "accepted": {
          "name": "accepted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "accepted_at_utc": {
          "name": "accepted_at_utc",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "terms_version": {
          "name": "terms_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1.0'"
        },
        "terms_effective_date": {
          "name": "terms_effective_date",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'2026-02-11'"
        },
        "terms_text_sha256": {
          "name": "terms_text_sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}